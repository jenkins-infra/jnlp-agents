properties([buildDiscarder(logRotator(daysToKeepStr: '15'))])

parallel(
  failFast: false,
  'maven-jdk8-nanoserver': {
    buildDockerAndPublishImage('inbound-agent-maven:jdk8-nanoserver', [
      dockerfile: 'maven/jdk8/Dockerfile.nanoserver',
      agentLabels: 'docker-windows-2019 && amd64',
      targetplatforms: 'windows/amd64',
      imageDir: 'maven/jdk8',
    ])
  },
  'maven-jdk11-nanoserver': {
    buildDockerAndPublishImage('inbound-agent-maven:jdk11-nanoserver', [
      dockerfile: 'maven/jdk11/Dockerfile.nanoserver',
      agentLabels: 'docker-windows-2019 && amd64',
      targetplatforms: 'windows/amd64',
    ])
  },
  'maven-jdk17-nanoserver': {
    buildDockerAndPublishImage('inbound-agent-maven:jdk17-nanoserver', [
      dockerfile: 'maven/jdk17/Dockerfile.nanoserver',
      agentLabels: 'docker-windows-2019 && amd64',
      targetplatforms: 'windows/amd64',
      imageDir: 'maven/jdk17',
    ])
  },
  'maven-jdk21-nanoserver': {
    buildDockerAndPublishImage('inbound-agent-maven:jdk21-nanoserver', [
      dockerfile: 'maven/jdk21/Dockerfile.nanoserver',
      agentLabels: 'docker-windows-2019 && amd64',
      targetplatforms: 'windows/amd64',
      imageDir: 'maven/jdk21',
    ])
  },
)
